## Актуальная проблема
* Задача 1
    - Задача 1 Нужно оптимизировать механизм перезагрузки расписания из файла так, чтобы он импортировал файл `large.json` **в пределах минуты**.
* Задача 2
    - Сами страницы расписаний тоже формируются не эффективно и при росте объёмов начинают сильно тормозить.
    
## Feedback-Loop
* небольшой рефакторинг, добавление бенчмарка
* добавление pghero
* добавление теста на импорт данных
* Добавлены тесты контроллера


## Вникаем в детали системы, чтобы найти главные точки роста

* Задача 1
    - импорт medium.json PGHERO показал 46,629 раз запрос SELECT  "services".* FROM "services" WHERE "services"."name" = $1 LIMIT $2
    - рефакторю модели
    - использую на импорте гем activerecord-import
* Задача 2
    - Добавлен гем bullet для анализа загрузки страницы
    - добавлен rack-mini-profile для визуализации на странице
    - подправил метод контроллера по рекомендациям bullet 18200 мс до 14400 мс
    - изменен app/views/trips/index.html.erb count на size - 11600 мс
    - изменен app/views/trips/index.html.erb рефакторинг на рендер коллеций - 10000 мс
    - рефакторинг app/views/trips/_trip.html.erb на рендере партиала сервисов передача масссива вместо оьектоа - 7500 мс
    - по рекомендациям bullet изменил eager loader количесвто запросов уменьшено до двух -  3300 мс

## Результаты
* Задача 1
    - В результате проделанной оптимизации наконец удалось обработать файл `large.json` без валидации "Summary: DURATION in sec = 27.62, MEMORY usage = 347 MB", с валидацией "Summary: DURATION in sec = 37.74, MEMORY usage = 348 MB"
* Задача 2
    -  В результате проделанной оптимизации наконец удалось уменьшить время загрузки 10000 записей на странице с 18200 мс до 3300 мс
