# Case-study оптимизации

### Добавил необходимые гемы для профилирования:
- bullet
- rack-mini-profiler
- pghero
- fasterer

### Находка №1
- `gem bullet` обнаружил N + 1: `Add to your query: .includes([:bus])`
- добавил `preload(bus: :services)`
- исправленна проблема N + 1
- скорость отображения страницы изменилась с `1487 ms` до `205 ms`

### Находка №2
- загрузил файл `medium.json`
- посмотрел rails model dependency diagram
- добавил модель `BusesService`
- скорость отображения страницы изменилась с `1473 ms` до `725 ms`

### Находка №3
- решил посмотреть код внимательнее, перед этим запустив `rubocop --require rubocop-performance`
- сделал небольшой рефакторинг, переделал рендер
- скорость отображения страницы изменилась с `725 ms` до `526 ms`